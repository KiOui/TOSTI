{% extends 'tosti/base.html' %}
{% load static order_now %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'orders/css/forms.css' %}"/>
    <link rel="stylesheet" href="{% static 'tosti/css/index.css' %}"/>
    <link rel="stylesheet" href="{% static 'orders/css/scanner.css' %}"/>
{% endblock %}

{% block page %}
    {% render_order_header shift %}
    <div class="container" id="message-container"></div>
    <div class="container scanner-container">
        <div id="scanner">
        </div>
    </div>
    <input type="button" id="start-scanner-button" class="btn-ml btn-on" value="Start scanner" onclick="start_scanner();"/>
    <div class="modal" id="overview-popup">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Scanned items</h2>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <p>
                        Select your scanned item below.
                    </p>
                    <div id="overview-popup-list-{{ shift.id }}">

                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block footer %}
    <footer class="page-footer navbar navbar-expand-md fixed-bottom">
        <div class="container text-center">
            <div class="row flex-grow-1">
                <div class="col">
                    <a href="{% url "orders:shift_admin" shift=shift %}">
                        <div class="btn-ml m-auto cursor-pointer btn-on" style="flex-grow: 0;">
                            <p class="font-footer"><i class="fas fa-sign-in-alt"></i> Shift admin</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </footer>
{% endblock %}

{% block js %}
    <script>
        const DATA_URL = "{% url 'orders:shift_admin_scanner' shift=shift %}";
        const CSRF_TOKEN = "{{ csrf_token }}";
        const POPUP_MODAL_BODY = document.getElementById("overview-popup-list-{{ shift.id }}");
        const POPUP_MODAL = "#overview-popup";
        const SCANNER = document.getElementById("scanner");
        const SCANNER_START_BUTTON = document.getElementById("start-scanner-button");
        const MESSAGE_CONTAINER = document.getElementById("message-container");
    </script>
    <script src="{% static "orders/js/quagga.min.js" %}"></script>
    <script src="{% static "orders/js/admin-scanner.js" %}"></script>
{% endblock %}